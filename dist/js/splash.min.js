!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Splash=t()}(this,function(){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e=function(){function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}}();function r(e){var t=document.body.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-t.left,y:i.top-t.top}}function i(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],s=document.createElement(e);return(t=s.classList).add.apply(t,function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(i)),s}var a={click:!1,hover:!0,class:{base:"splash",disabled:"disabled",wave:"splash-wave",waveOut:"splash-wave-out",waves:"splash-waves",wrap:"splash-wrap"}},o=function(){function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};s(this,a),this.elem=e,this.cfg=t,this.active={},this.wrap(),this.handler={mouseenter:this.startHover.bind(this),mouseleave:this.endHover.bind(this),mousedown:this.startClick.bind(this),mouseup:this.endClick.bind(this)},this.addEventListeners()}return e(a,[{key:"addEventListeners",value:function(){this.elem.addEventListener("mouseenter",this.handler.mouseenter,!1),this.elem.addEventListener("mouseleave",this.handler.mouseleave,!1),this.elem.addEventListener("mousedown",this.handler.mousedown,!1),this.elem.addEventListener("mouseup",this.handler.mouseup,!1)}},{key:"createWave",value:function(){var e=i("div",[this.cfg.class.wave]);return this.waves.appendChild(e),this.save(e),e}}]),e(a,[{key:"destroy",value:function(){this.removeEventListeners(),this.unwrap()}},{key:"endClick",value:function(e){console.log(this),console.log(e)}},{key:"endHover",value:function(e){var t=this;e.stopPropagation();var i=r(this.elem),s=this.getWave();s.style.left=e.pageX-i.x+"px",s.style.top=e.pageY-i.y+"px",s.classList.remove(this.cfg.class.waveOut);var n=a.getDuration(s);setTimeout(function(){t.waves.removeChild(s)},n)}},{key:"getSize",value:function(e,t){var i=e<this.elem.offsetWidth/2?this.elem.offsetWidth:0,s=t<this.elem.offsetHeight/2?this.elem.offsetHeight:0,n=Math.abs(e-i),a=Math.abs(t-s);return Math.sqrt(n*n+a*a)}},{key:"getWave",value:function(){var e=this.active;return delete this.active,e}},{key:"removeEventListeners",value:function(){this.elem.removeEventListener("mouseenter",this.handler.mouseenter,!1),this.elem.removeEventListener("mouseleave",this.handler.mouseleave,!1)}},{key:"save",value:function(e){this.active=e}},{key:"startClick",value:function(e){console.log(this),console.log(e)}},{key:"startHover",value:function(e){if(e.stopPropagation(),!this.isDisabled&&this.cfg.hover){var t=r(this.elem),i=this.createWave(),s=e.pageX-t.x,n=e.pageY-t.y;i.style.left=s+"px",i.style.top=n+"px";var a=this.getSize(s,n);i.style.width=2*a+"px",i.style.height=2*a+"px",i.classList.add(this.cfg.class.waveOut)}}},{key:"unwrap",value:function(){for(this.elem.removeChild(this.waves),this.waves=null;this.wrapper.firstChild;)this.elem.insertBefore(this.wrapper.firstChild,this.wrapper);this.elem.removeChild(this.wrapper),this.wrapper=null,this.elem.classList.remove(this.cfg.class.base)}},{key:"update",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.cfg=Object.assign({},e)}},{key:"wrap",value:function(){if(this.elem.classList.add(this.cfg.class.base),!this.isWrapped){var e=i("div",[this.cfg.class.wrap]);for(this.elem.appendChild(e);this.elem.firstChild!==e;)e.appendChild(this.elem.firstChild);var t=i("div",[this.cfg.class.waves]);this.elem.insertBefore(t,e),this.waves=t,this.wrapper=e}}},{key:"isDisabled",get:function(){return this.elem.hasAttribute("disabled")||this.elem.classList.contains(this.cfg.class.disabled)}},{key:"isWrapped",get:function(){return!!function(e,t){var i=void 0;if(!e||!e.children)return i;for(var s=0;s<e.children.length;s+=1)if(e.children[s].classList.contains(t)){i=e.children[s];break}return i}(this.elem,this.cfg.class.waves)}}],[{key:"getDuration",value:function(e){var t=window.getComputedStyle(e,null).getPropertyValue("transition-duration"),i=parseFloat(t);return i?t.endsWith("ms")?i:1e3*i:0}}]),a}();return function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};s(this,i),this.ts=Object.prototype.toString,this.$=document.querySelectorAll.bind(document);var t="[object Object]"!==this.ts.call(e)?{}:e;this.cfg=Object.assign({},a,t),this.active=[]}return e(i,[{key:"attach",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this.normalize(e),s="[object Object]"!==this.ts.call(t)?{}:t;s=Object.assign({},this.cfg,s);for(var n=0;n<i.length;n+=1){var a=this.find(i[n]);void 0!==a?a.update(s):this.active.push(new o(i[n],s))}}}]),e(i,[{key:"destroy",value:function(){for(var e=0;e<this.active.length;e+=1)this.active[e].destroy(),delete this.active[e]}},{key:"find",value:function(t){return this.active.filter(function(e){return e.elem===t})[0]}},{key:"init",value:function(){this.active=[];for(var e=this.$("."+this.cfg.class.base),t=0;t<e.length;t+=1)this.active.push(new o(e[t],this.cfg))}},{key:"normalize",value:function(e){return"string"==typeof e?this.$(e):(t=e,i=Object.prototype.toString.call(t),t&&"object"===(void 0===t?"undefined":n(t))&&(t.length||Object.keys(t).length)&&/^\[object (Array|HTMLCollection|NodeList|Object)\]$/.test(i)?e:(s=e,("object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement))?s instanceof HTMLElement:s&&"object"===(void 0===s?"undefined":n(s))&&null!==s&&1===s.nodeType&&"string"==typeof s.nodeName)?[e]:[]));var t,i,s}}]),i}()});
