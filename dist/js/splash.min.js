!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Splash=t()}(this,function(){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e=function(){function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}}();function h(e){var t=document.body.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-t.left,y:i.top-t.top}}function a(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],s=document.createElement(e);return(t=s.classList).add.apply(t,function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(i)),s}var r={click:!0,hover:!0,class:{base:"splash",clickWave:"splash-click",clickOut:"splash-click-out",disabled:"disabled",fade:"splash-fade",hoverWave:"splash-hover",hoverOut:"splash-hover-out",waves:"splash-waves",wrap:"splash-wrap"}},l=function(){function c(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};s(this,c),this.elem=e,this.cfg=t,this.active={click:null,hover:null},this.wrap(),this.handler={start:this.startEffect.bind(this),end:this.endEffect.bind(this)},this.addEventListeners()}return e(c,[{key:"addEventListeners",value:function(){this.elem.addEventListener("mouseenter",this.handler.start,!1),this.elem.addEventListener("mouseleave",this.handler.end,!1),this.elem.addEventListener("mousedown",this.handler.start,!1),this.elem.addEventListener("mouseup",this.handler.end,!1)}},{key:"createWave",value:function(e,t){var i=a("div",[t]);return this.waves.appendChild(i),this.saveWave(e,i),i}}]),e(c,[{key:"destroy",value:function(){this.removeEventListeners(),this.unwrap()}},{key:"endClick",value:function(e){this||console.log(e)}},{key:"endEffect",value:function(e){var t=this;e.stopPropagation();var i=c.getWaveType(e.type);if(i&&"hover"===i&&!this.isDisabled&&this.cfg[i]){var s=h(this.elem),n=this.getWave(i);n.style.left=e.pageX-s.x+"px",n.style.top=e.pageY-s.y+"px",n.classList.remove(this.cfg.class[i+"Out"]);var a=c.getDuration(n);setTimeout(function(){t.waves.removeChild(n)},a)}}},{key:"getSize",value:function(e,t){var i=e<this.elem.offsetWidth/2?this.elem.offsetWidth:0,s=t<this.elem.offsetHeight/2?this.elem.offsetHeight:0,n=Math.abs(e-i),a=Math.abs(t-s);return Math.ceil(Math.sqrt(n*n+a*a))}},{key:"getWave",value:function(e){if(Object.prototype.hasOwnProperty.call(this.active,e)){var t=this.active[e];return delete this.active[e],t}}},{key:"removeEventListeners",value:function(){this.elem.removeEventListener("mouseenter",this.handler.mouseenter,!1),this.elem.removeEventListener("mouseleave",this.handler.mouseleave,!1)}},{key:"saveWave",value:function(e,t){this.active[e]=t}},{key:"startEffect",value:function(e){var t=this;e.stopPropagation();var i=c.getWaveType(e.type);if(i&&!this.isDisabled&&this.cfg[i]){var s=h(this.elem),n=this.createWave(i,this.cfg.class[i+"Wave"]),a=e.pageX-s.x,r=e.pageY-s.y;n.style.left=a+"px",n.style.top=r+"px";var l=this.getSize(a,r);if(n.style.width=2*l+"px",n.style.height=2*l+"px",n.classList.add(this.cfg.class[i+"Out"]),"click"===i){var o=c.getDuration(n);setTimeout(function(){n.classList.add(t.cfg.class.fade),setTimeout(function(){t.waves.removeChild(n)},o)},o)}}}},{key:"unwrap",value:function(){for(this.elem.removeChild(this.waves),this.waves=null;this.wrapper.firstChild;)this.elem.insertBefore(this.wrapper.firstChild,this.wrapper);this.elem.removeChild(this.wrapper),this.wrapper=null,this.elem.classList.remove(this.cfg.class.base)}},{key:"update",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.cfg=Object.assign({},e)}},{key:"wrap",value:function(){if(this.elem.classList.add(this.cfg.class.base),!this.isWrapped){var e=a("div",[this.cfg.class.wrap]);for(this.elem.appendChild(e);this.elem.firstChild!==e;)e.appendChild(this.elem.firstChild);var t=a("div",[this.cfg.class.waves]);this.elem.insertBefore(t,e),this.waves=t,this.wrapper=e}}},{key:"isDisabled",get:function(){return this.elem.hasAttribute("disabled")||this.elem.classList.contains(this.cfg.class.disabled)}},{key:"isWrapped",get:function(){return!!function(e,t){var i=void 0;if(!e||!e.children)return i;for(var s=0;s<e.children.length;s+=1)if(e.children[s].classList.contains(t)){i=e.children[s];break}return i}(this.elem,this.cfg.class.waves)}}],[{key:"getDuration",value:function(e){var t=window.getComputedStyle(e,null).getPropertyValue("transition-duration"),i=parseFloat(t);return i?t.endsWith("ms")?i:1e3*i:0}},{key:"getWaveType",value:function(e){var t=void 0;switch(e){case"mousedown":case"mouseup":t="click";break;case"mouseenter":case"mouseleave":t="hover";break;default:t=!1}return t}}]),c}();return function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};s(this,i),this.ts=Object.prototype.toString,this.$=document.querySelectorAll.bind(document);var t="[object Object]"!==this.ts.call(e)?{}:e;this.cfg=Object.assign({},r,t),this.active=[]}return e(i,[{key:"attach",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this.normalize(e),s="[object Object]"!==this.ts.call(t)?{}:t;s=Object.assign({},this.cfg,s);for(var n=0;n<i.length;n+=1){var a=this.find(i[n]);void 0!==a?a.update(s):this.active.push(new l(i[n],s))}}}]),e(i,[{key:"destroy",value:function(){for(var e=0;e<this.active.length;e+=1)this.active[e].destroy(),delete this.active[e]}},{key:"find",value:function(t){return this.active.filter(function(e){return e.elem===t})[0]}},{key:"init",value:function(){this.active=[];for(var e=this.$("."+this.cfg.class.base),t=0;t<e.length;t+=1)this.active.push(new l(e[t],this.cfg))}},{key:"normalize",value:function(e){return"string"==typeof e?this.$(e):(t=e,i=Object.prototype.toString.call(t),t&&"object"===(void 0===t?"undefined":n(t))&&(t.length||Object.keys(t).length)&&/^\[object (Array|HTMLCollection|NodeList|Object)\]$/.test(i)?e:(s=e,("object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement))?s instanceof HTMLElement:s&&"object"===(void 0===s?"undefined":n(s))&&null!==s&&1===s.nodeType&&"string"==typeof s.nodeName)?[e]:[]));var t,i,s}}]),i}()});
