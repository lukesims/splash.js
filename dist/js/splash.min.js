!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Splash=t()}(this,function(){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function r(e,t){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");return!!e.className.match(i)}function o(e,t){r(e,t)||(e.className+=" "+t)}function l(e){var t=document.body.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-t.left,y:i.top-t.top}}function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=document.createElement("div");return i.className=t,i}var c=function(){function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};n(this,a),this.elem=e,this.cfg=t,this.active={},this.wrap(),this.addEventListeners()}return e(a,[{key:"addEventListeners",value:function(){var t=this;this.elem.addEventListener("mouseenter",function(e){return t.startHover(e)},!1),this.elem.addEventListener("mouseleave",function(e){return t.endHover(e)},!1)}},{key:"createWave",value:function(){var e=i("div",this.cfg.class.wave);return this.waves.appendChild(e),this.save(e),e}}]),e(a,[{key:"endHover",value:function(e){var t=this;e.stopPropagation();var i=l(this.elem),n=this.getWave();n.style.left=e.pageX-i.x+"px",n.style.top=e.pageY-i.y+"px",function(e,t){if(r(e,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ")}}(n,this.cfg.class.waveOut);var s=a.getDuration(n);setTimeout(function(){t.waves.removeChild(n)},s)}},{key:"getSize",value:function(e,t){var i=e<this.elem.offsetWidth/2?this.elem.offsetWidth:0,n=t<this.elem.offsetHeight/2?this.elem.offsetHeight:0,s=Math.abs(e-i),a=Math.abs(t-n);return Math.sqrt(s*s+a*a)}},{key:"getWave",value:function(){var e=this.elem.getAttribute(this.cfg.attr.wave),t=this.active[e];return delete this.active[e],this.elem.removeAttribute(this.cfg.attr.wave),t}},{key:"save",value:function(e){var t=Date.now();this.active[t]=e,this.elem.setAttribute(this.cfg.attr.wave,t)}},{key:"startHover",value:function(e){if(e.stopPropagation(),!this.isDisabled&&this.cfg.hover){var t=l(this.elem),i=this.createWave(),n=e.pageX-t.x,s=e.pageY-t.y;i.style.left=n+"px",i.style.top=s+"px";var a=this.getSize(n,s);i.style.width=2*a+"px",i.style.height=2*a+"px",o(i,this.cfg.class.waveOut)}}},{key:"update",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.cfg=Object.assign({},e)}},{key:"wrap",value:function(){if(o(this.elem,this.cfg.class.base),!this.isWrapped){var e=i("div",this.cfg.class.wrap);for(this.elem.appendChild(e);this.elem.firstChild!==e;)e.appendChild(this.elem.firstChild);var t=i("div",this.cfg.class.waves);this.elem.insertBefore(t,e),this.waves=t,this.wrapper=e}}},{key:"isDisabled",get:function(){return r(this.elem,this.cfg.class.disabled)}},{key:"isWrapped",get:function(){return!!function(e,t){for(var i=void 0,n=0;n<e.children.length;n+=1)if(r(e.children[n],t)){i=e.children[n];break}return i}(this.elem,this.cfg.class.waves)}}],[{key:"getDuration",value:function(e){var t=window.getComputedStyle(e,null).getPropertyValue("transition-duration"),i=parseFloat(t);return i?t.endsWith("ms")?i:1e3*i:0}}]),a}(),a={click:!1,hover:!0,attr:{base:"data-splash",wave:"data-splash-wave"},class:{base:"splash",disabled:"disabled",wave:"splash-wave",waveOut:"splash-wave-out",waves:"splash-waves",wrap:"splash-wrap"}};return function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,i),this.ts=Object.prototype.toString,this.$=document.querySelectorAll.bind(document);var t="[object Object]"!==this.ts.call(e)?{}:e;this.cfg=Object.assign({},a,t),this.active=[]}return e(i,[{key:"attach",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this.normalize(e),n="[object Object]"!==this.ts.call(t)?{}:t;n=Object.assign({},this.cfg,n);for(var s=0;s<i.length;s+=1){var a=this.find(i[s]);void 0!==a?a.update(n):this.active.push(new c(i[s],n))}}}]),e(i,[{key:"find",value:function(t){return this.active.find(function(e){return e.elem===t})}},{key:"init",value:function(){this.active=[];for(var e=this.$("."+this.cfg.class.base),t=0;t<e.length;t+=1)this.active.push(new c(e[t],this.cfg))}},{key:"normalize",value:function(e){return"string"==typeof e?this.$(e):(t=e,i=Object.prototype.toString.call(t),t&&"object"===(void 0===t?"undefined":s(t))&&/^\[object (Array|HTMLCollection|NodeList|Object)\]$/.test(i)&&t.length?e:(n=e,("object"===("undefined"==typeof HTMLElement?"undefined":s(HTMLElement))?n instanceof HTMLElement:n&&"object"===(void 0===n?"undefined":s(n))&&null!==n&&1===n.nodeType&&"string"==typeof n.nodeName)?[e]:[]));var t,i,n}}]),i}()});
